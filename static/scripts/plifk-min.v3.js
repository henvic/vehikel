var externalLinks=function(){if(!document.getElementsByTagName){return}var c=document.getElementsByTagName("a");for(var b=0;b<c.length;b++){var a=c[b];if(a.getAttribute("href")&&YAHOO.util.Dom.hasClass(a,"new-window")){a.target="_blank"}}};YAHOO.util.Event.on(window,"load",externalLinks);var loadLoginFocus=function(a){if(document.getElementById("login")){document.getElementById("username").focus();if(a.type!=="load"){YAHOO.util.Event.preventDefault(a)}}};YAHOO.util.Event.addListener("login-button","click",loadLoginFocus);var loadEditFocus=function(a){if(document.getElementById("filename")&&document.getElementById("title")){document.getElementById("title").focus()}};var favoriteCallback={success:function(a){if(a.responseText!==undefined){if(a.responseText!==""){document.getElementById("shareFavorite").innerHTML=a.responseText}}},failure:function(a){}};var favoriteEvent=function(a){var b=YAHOO.util.Event.getTarget(a);while(b.id!=="container"){if(b.nodeName.toLowerCase()==="a"){YAHOO.util.Event.stopEvent(a);YAHOO.util.Connect.asyncRequest("GET",b.href+"&ajax",favoriteCallback);break}else{b=b.parentNode}}};YAHOO.util.Event.addListener("shareFavorite","click",favoriteEvent);var updateTagsAndClearFieldCallback={success:function(a){if(a.responseText!==undefined){if(a.responseText!==""){document.getElementById("thetags").innerHTML=a.responseText;document.getElementById("tags").value=""}}},failure:function(a){}};var updateTagsCallback={success:function(a){if(a.responseText!==undefined){if(a.responseText!==""){document.getElementById("thetags").innerHTML=a.responseText}}},failure:function(a){}};var addTagsEvent=function(c){YAHOO.util.Event.stopEvent(c);var b=encodeURIComponent(document.getElementById("tags").value);if(b){var a="tags="+b+"&hash="+global_auth_hash;YAHOO.util.Connect.asyncRequest("POST","?addtags&ajax",updateTagsAndClearFieldCallback,a)}};var deleteTagEvent=function(a){var b=YAHOO.util.Event.getTarget(a);while(b.id!=="container"){if(b.nodeName.toLowerCase()==="a"){if(b.parentNode.nodeName.toLowerCase()==="small"){YAHOO.util.Event.stopEvent(a);YAHOO.util.Connect.asyncRequest("GET",b.href+"&ajax",updateTagsCallback)}break}else{b=b.parentNode}}};YAHOO.util.Event.addListener("tagsSubmit","click",addTagsEvent);YAHOO.util.Event.addListener("thetags","click",deleteTagEvent);var cleartwittermsg=function(){document.getElementById("twitter-servicemsg").innerHTML=""};var updateTwitterStatusCallback={success:function(b){if(b.responseText!==undefined){if(b.responseText!==""){document.getElementById("twitter-servicemsg").innerHTML=b.responseText;YAHOO.util.Dom.setStyle(document.getElementById("twitter-servicemsg"),"opacity","0");var a=new YAHOO.util.Anim(document.getElementById("twitter-servicemsg"),{opacity:{from:0,to:1}},1,YAHOO.util.Easing.backIn);a.animate();setTimeout(cleartwittermsg,10000)}}},failure:function(a){}};var tweetwriteEvent=function(d){var f=document.getElementById("tweet").value;var a=document.getElementById("tweet-element").getElementsByTagName("p")[0];if(!a.getElementsByTagName("span")[0]){a.innerHTML=a.innerHTML+"<span></span>";YAHOO.util.Dom.addClass(a.getElementsByTagName("span")[0],"tweetchar")}var b=a.getElementsByTagName("span")[0];if(f.length>=110){YAHOO.util.Dom.removeClass(b,"tweetcharok");YAHOO.util.Dom.addClass(b,"tweetchartoomuch")}else{if(f.length>=100){YAHOO.util.Dom.removeClass(b,"tweetchartoomuch");YAHOO.util.Dom.addClass(b,"tweetcharok")}else{YAHOO.util.Dom.removeClass(b,"tweetchartoomuch");YAHOO.util.Dom.removeClass(b,"tweetcharok")}}var c;if(f.length>140){c=" âˆ’"+(f.length-140)}else{c=" "+(140-f.length)}a.getElementsByTagName("span")[0].innerHTML=c;if(f.length>140){document.getElementById("tweetSubmit").disabled=true}else{document.getElementById("tweetSubmit").disabled=false}};YAHOO.util.Event.addListener("tweet","keyup",tweetwriteEvent);YAHOO.util.Event.addListener("tweet","click",tweetwriteEvent);var tweetEvent=function(b){YAHOO.util.Event.stopEvent(b);var c=encodeURIComponent(document.getElementById("tweet").value);if(c){var a="tweet="+c+"&hash="+global_auth_hash;YAHOO.util.Connect.asyncRequest("POST","?tweet&ajax",updateTwitterStatusCallback,a)}};YAHOO.util.Event.addListener("tweetSubmit","click",tweetEvent);